<script>
'use strict';
// 引入依赖
const nodemailer = require('nodemailer');

/**
 * 发送邮件
 */
async function sendEmail(reader,subject,text,mode) {
  // 配置邮件服务器
  let transporter = nodemailer.createTransport({
    host: "smtp.office365.com",
    port: 587,
    secure: false,
    auth: {
      user: 'hehandong2009@hotmail.com',
      pass: 'he201617',
    },
  });

  // 发送邮件
  if(mode="text"){
    let info = await transporter.sendMail({
    from: '寒冬利刃的网站 <from hehandong2009@hotmail.com>',
    to: `to${reader}`,
    subject: subject,
    text: text
    })}
  else if(mode="html"){
    let info = await transporter.sendMail({
    from: '寒冬利刃的网站 <from hehandongl2009@hotmail.com>',
    to: `to${reader}`,
    subject: subject,
    html: text
    })}
  
  console.log(info)
  alert(info)

sendEmail('1079489986@qq.com','test','Hello world!','text');
</script>
